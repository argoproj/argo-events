/*
Copyright 2018 BlackRock, Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
// This file was autogenerated by go-to-protobuf. Do not edit it manually!

syntax = 'proto2';

package github.com.argoproj.argo_events.pkg.apis.common;

import "k8s.io/api/core/v1/generated.proto";
import "k8s.io/apimachinery/pkg/apis/meta/v1/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/generated.proto";
import "k8s.io/apimachinery/pkg/util/intstr/generated.proto";

// Package-wide variables from generator "generated".
option go_package = "common";

// Event is a data record expressing an occurrence and its context.
// Adheres to the CloudEvents v0.1 specification
message Event {
  optional EventContext context = 1;

  optional bytes data = 2;
}

// EventContext contains metadata that provides circumstantial information about the occurrence.
message EventContext {
  // The type of occurrence which has happened. Often this attribute is used for
  // routing, observability, policy enforcement, etc.
  // should be prefixed with a reverse-DNS name. The prefixed domain dictates
  // the organization which defines the semantics of this event type. ex: com.github.pull.create
  optional string eventType = 1;

  // The version of the eventType. Enables the interpretation of data by eventual consumers,
  // requires the consumer to be knowledgeable about the producer.
  optional string eventTypeVersion = 2;

  // The version of the CloudEvents specification which the event uses.
  // Enables the interpretation of the context.
  optional string cloudEventsVersion = 3;

  // This describes the event producer.
  optional URI source = 4;

  // ID of the event. The semantics are explicitly undefined to ease the implementation of producers.
  // Enables deduplication. Must be unique within scope of producer.
  optional string eventID = 5;

  optional k8s.io.apimachinery.pkg.apis.meta.v1.MicroTime eventTime = 6;

  // A link to the schema that the data attribute adheres to.
  // Must adhere to the format specified in RFC 3986.
  optional URI schemaURL = 7;

  // Content type of the data attribute value. Enables the data attribute to carry any type of content,
  // whereby format and encoding might differ from that of the chosen event format.
  // For example, the data attribute may carry an XML or JSON payload and the consumer is informed
  // by this attribute being set to "application/xml" or "application/json" respectively.
  optional string contentType = 8;

  // This is for additional metadata and does not have a mandated structure.
  // Enables a place for custom fields a producer or middleware might want to include and provides a place
  // to test metadata before adding them to the CloudEvents specification.
  map<string, string> extensions = 9;
}

// Dispatch protocol contains configuration necessary to dispatch an event to sensor over different communication protocols
message EventProtocol {
  optional string type = 1;

  optional Http http = 2;

  optional Nats nats = 3;
}

// Http contains the information required to setup a http server and listen to incoming events
message Http {
  // Port on which server will run
  optional string port = 1;
}

// Nats contains the information required to connect to nats server and get subscriptions
message Nats {
  // URL is nats server/service URL
  optional string url = 1;

  // Subscribe starting with most recently published value. Refer https://github.com/nats-io/go-nats-streaming
  optional bool startWithLastReceived = 2;

  // Receive all stored values in order.
  optional bool deliverAllAvailable = 3;

  // Receive messages starting at a specific sequence number
  optional string startAtSequence = 4;

  // Subscribe starting at a specific time
  optional string startAtTime = 5;

  // Subscribe starting a specific amount of time in the past (e.g. 30 seconds ago)
  optional string startAtTimeDelta = 6;

  // Durable subscriptions allow clients to assign a durable name to a subscription when it is created
  optional bool durable = 7;

  // The NATS Streaming cluster ID
  optional string clusterId = 8;

  // The NATS Streaming cluster ID
  optional string clientId = 9;

  // Type of the connection. either standard or streaming
  optional string type = 10;
}

// S3Artifact contains information about an artifact in S3
message S3Artifact {
  optional string endpoint = 1;

  optional S3Bucket bucket = 2;

  optional string region = 3;

  optional bool insecure = 4;

  optional k8s.io.api.core.v1.SecretKeySelector accessKey = 5;

  optional k8s.io.api.core.v1.SecretKeySelector secretKey = 6;

  optional string event = 7;

  optional S3Filter filter = 8;
}

// S3Bucket contains information to describe an S3 Bucket
message S3Bucket {
  optional string key = 1;

  optional string name = 2;
}

// S3Filter represents filters to apply to bucket nofifications for specifying constraints on objects
message S3Filter {
  optional string prefix = 1;

  optional string suffix = 2;
}

// ServiceTemplateSpec is the template spec contains metadata and service spec.
message ServiceTemplateSpec {
  // Standard object's metadata.
  // More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
  // +optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  // Specification of the desired behavior of the pod.
  // More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status
  // +optional
  optional k8s.io.api.core.v1.ServiceSpec spec = 2;
}

// URI is a Uniform Resource Identifier based on RFC 3986
message URI {
  optional string scheme = 1;

  optional string user = 2;

  optional string password = 3;

  optional string host = 4;

  optional int32 port = 5;

  optional string path = 6;

  optional string query = 7;

  optional string fragment = 8;
}

