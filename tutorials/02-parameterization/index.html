



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Parameterization - Argo Events - The Event-Based Dependency Manager for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700|">
        <style>body,input{font-family:"Work Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105170809-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#parameterization" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Argo Events - The Event-Based Dependency Manager for Kubernetes" class="md-header-nav__button md-logo">
          
            <img src="../../assets/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Argo Events - The Event-Based Dependency Manager for Kubernetes
            </span>
            <span class="md-header-nav__topic">
              Parameterization
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/argoproj/argo-events/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Argo Events - The Event-Based Dependency Manager for Kubernetes" class="md-nav__button md-logo">
      
        <img src="../../assets/logo.png" width="48" height="48">
      
    </a>
    Argo Events - The Event-Based Dependency Manager for Kubernetes
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/argoproj/argo-events/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../quick_start/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/event_source/" title="Event Source" class="md-nav__link">
      Event Source
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/sensor/" title="Sensor" class="md-nav__link">
      Sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/eventbus/" title="Eventbus" class="md-nav__link">
      Eventbus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/trigger/" title="Trigger" class="md-nav__link">
      Trigger
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/amqp/" title="AMQP" class="md-nav__link">
      AMQP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/aws-sns/" title="AWS SNS" class="md-nav__link">
      AWS SNS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/aws-sqs/" title="AWS SQS" class="md-nav__link">
      AWS SQS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/calendar/" title="Calendar" class="md-nav__link">
      Calendar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/emitter/" title="Emitter" class="md-nav__link">
      Emitter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/gcp-pub-sub/" title="GCP PubSub" class="md-nav__link">
      GCP PubSub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/github/" title="GitHub" class="md-nav__link">
      GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/gitlab/" title="GitLab" class="md-nav__link">
      GitLab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/minio/" title="Minio" class="md-nav__link">
      Minio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/mqtt/" title="MQTT" class="md-nav__link">
      MQTT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/nats/" title="NATS" class="md-nav__link">
      NATS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/nsq/" title="NSQ" class="md-nav__link">
      NSQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/redis/" title="Redis" class="md-nav__link">
      Redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/resource/" title="Resource" class="md-nav__link">
      Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/webhook/" title="Webhook" class="md-nav__link">
      Webhook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01-introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Parameterization
      </label>
    
    <a href="./" title="Parameterization" class="md-nav__link md-nav__link--active">
      Parameterization
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trigger-resource-parameterization" title="Trigger Resource Parameterization" class="md-nav__link">
    Trigger Resource Parameterization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webhook-event-payload" title="Webhook Event Payload" class="md-nav__link">
    Webhook Event Payload
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-context" title="Event Context" class="md-nav__link">
    Event Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-data" title="Event Data" class="md-nav__link">
    Event Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-values" title="Default Values" class="md-nav__link">
    Default Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sprig-templates" title="Sprig Templates" class="md-nav__link">
    Sprig Templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations" title="Operations" class="md-nav__link">
    Operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trigger-template-parameterization" title="Trigger Template Parameterization" class="md-nav__link">
    Trigger Template Parameterization
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-trigger-sources/" title="Trigger Sources" class="md-nav__link">
      Trigger Sources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-standard-k8s-resources/" title="Trigger Standard K8s Resources" class="md-nav__link">
      Trigger Standard K8s Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-trigger-custom-resources/" title="Trigger Custom Resources" class="md-nav__link">
      Trigger Custom Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06-circuit-and-switch/" title="Circuit and Switch" class="md-nav__link">
      Circuit and Switch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../07-filters/" title="Filters" class="md-nav__link">
      Filters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../08-policy/" title="Policy" class="md-nav__link">
      Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../09-service-account/" title="09 service account" class="md-nav__link">
      09 service account
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Triggers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Triggers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/argo-workflow/" title="Argo Workflow Trigger" class="md-nav__link">
      Argo Workflow Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/aws-lambda/" title="AWS Lambda" class="md-nav__link">
      AWS Lambda
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/http-trigger/" title="HTTP Trigger" class="md-nav__link">
      HTTP Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/nats-trigger/" title="NATS Trigger" class="md-nav__link">
      NATS Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/kafka-trigger/" title="Kafka Trigger" class="md-nav__link">
      Kafka Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/k8s-object-trigger/" title="Kubernetes Object Trigger" class="md-nav__link">
      Kubernetes Object Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/openwhisk-trigger/" title="OpenWhisk Trigger" class="md-nav__link">
      OpenWhisk Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/slack-trigger/" title="Slack Trigger" class="md-nav__link">
      Slack Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../triggers/build-your-own-trigger/" title="Build Your Own Trigger" class="md-nav__link">
      Build Your Own Trigger
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../developer_guide/" title="Developer Guide" class="md-nav__link">
      Developer Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../FAQ/" title="FAQs" class="md-nav__link">
      FAQs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo-events/releases" title="Releases ⧉" class="md-nav__link">
      Releases ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo-events/milestones" title="Roadmap ⧉" class="md-nav__link">
      Roadmap ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://blog.argoproj.io/" title="Blog ⧉" class="md-nav__link">
      Blog ⧉
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trigger-resource-parameterization" title="Trigger Resource Parameterization" class="md-nav__link">
    Trigger Resource Parameterization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webhook-event-payload" title="Webhook Event Payload" class="md-nav__link">
    Webhook Event Payload
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-context" title="Event Context" class="md-nav__link">
    Event Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-data" title="Event Data" class="md-nav__link">
    Event Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-values" title="Default Values" class="md-nav__link">
    Default Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sprig-templates" title="Sprig Templates" class="md-nav__link">
    Sprig Templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations" title="Operations" class="md-nav__link">
    Operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trigger-template-parameterization" title="Trigger Template Parameterization" class="md-nav__link">
    Trigger Template Parameterization
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/argoproj/argo-events/edit/master/docs/tutorials/02-parameterization.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="parameterization">Parameterization<a class="headerlink" href="#parameterization" title="Permanent link">&para;</a></h1>
<p>In the previous section, we saw how to set up a basic webhook event-source and sensor. The trigger template had <code>parameters</code> set in the sensor object, and
the workflow was able to print the event payload. In this tutorial, we will dig deeper into
different types of parameterization, how to extract particular key-value from event payload
and how to use default values if certain <code>key</code> is not available within event payload.</p>
<h2 id="trigger-resource-parameterization">Trigger Resource Parameterization<a class="headerlink" href="#trigger-resource-parameterization" title="Permanent link">&para;</a></h2>
<p>If you take a closer look at the <code>Sensor</code> object, you will notice it contains a list
of triggers. Each <code>Trigger</code> contains the template that defines the context of the trigger
and actual <code>resource</code> that we expect the sensor to execute. In the previous section, the <code>resource</code> within
the trigger template was an Argo workflow.</p>
<p>This subsection deals with how to parameterize the <code>resource</code> within trigger template
with the event payload.</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>Make sure to have the basic webhook event-source and sensor set up. Follow the <a href="https://argoproj.github.io/argo-events/tutorials/01_introduction">introduction</a> tutorial if haven't done already.</p>
<h3 id="webhook-event-payload">Webhook Event Payload<a class="headerlink" href="#webhook-event-payload" title="Permanent link">&para;</a></h3>
<p>Webhook event-source consumes events through HTTP requests and transforms them into CloudEvents.
The structure of the event the Webhook sensor receives from the event-source over the eventbus looks like following,</p>
<div class="codehilite"><pre><span></span>    {
        &quot;context&quot;: {
          &quot;type&quot;: &quot;type_of_event_source&quot;,
          &quot;specversion&quot;: &quot;cloud_events_version&quot;,
          &quot;source&quot;: &quot;name_of_the_event_source&quot;,
          &quot;id&quot;: &quot;unique_event_id&quot;,
          &quot;time&quot;: &quot;event_time&quot;,
          &quot;datacontenttype&quot;: &quot;type_of_data&quot;,
          &quot;subject&quot;: &quot;name_of_the_configuration_within_event_source&quot;
        },
        &quot;data&quot;: {
          &quot;header&quot;: {},
          &quot;body&quot;: {},
        }
    }
</pre></div>


<ol>
<li>
<p><code>Context</code>: This is the CloudEvent context and it is populated by the event-source regardless of 
type of HTTP request.</p>
</li>
<li>
<p><code>Data</code>: Data contains following fields,</p>
</li>
<li>
<p><code>Header</code>: The <code>header</code> within event <code>data</code> contains the headers in the HTTP request that was dispatched
   to the event-source. The event-source extracts the headers from the request and put it in
   the the <code>header</code> within event <code>data</code>. </p>
</li>
<li>
<p><code>Body</code>: This is the request payload from the HTTP request.</p>
</li>
</ol>
<h3 id="event-context">Event Context<a class="headerlink" href="#event-context" title="Permanent link">&para;</a></h3>
<p>Now that we have an understanding of the structure of the event the webhook sensor receives from
the event-source over the eventbus, lets see how we can use the event context to parameterize the Argo workflow.</p>
<ol>
<li>
<p>Update the <code>Webhook Sensor</code> and add the <code>contextKey</code> for the parameter at index 0.</p>
<div class="codehilite"><pre><span></span>kubectl -n argo-events apply -f https://raw.githubusercontent.com/argoproj/argo-events/stable/examples/tutorials/02-parameterization/sensor-01.yaml
</pre></div>


</li>
<li>
<p>Send a HTTP request to the event-source pod.</p>
<div class="codehilite"><pre><span></span>curl -d &#39;{&quot;message&quot;:&quot;this is my first webhook&quot;}&#39; -H &quot;Content-Type: application/json&quot; -X POST http://localhost:12000/example
</pre></div>


</li>
<li>
<p>Inspect the output of the Argo workflow that was created.</p>
<div class="codehilite"><pre><span></span>argo logs name_of_the_workflow
</pre></div>


</li>
</ol>
<p>You will see the following output,</p>
<div class="codehilite"><pre><span></span>    _________
    &lt; webhook &gt;
    ---------
       \
        \
         \
                       ##        .
                 ## ## ##       ==
              ## ## ## ##      ===
          /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;___/ ===
     ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~
          \______ o          __/
           \    \        __/
             \____\______/
</pre></div>


<p>We have successfully extracted the <code>type</code> key within the event context and parameterized
the workflow to print the value of the <code>type</code>.</p>
<h3 id="event-data">Event Data<a class="headerlink" href="#event-data" title="Permanent link">&para;</a></h3>
<p>Now, it is time to use the event data and parameterize the Argo workflow trigger.
We will extract the <code>message</code> from request payload and get the Argo workflow to 
print the message.</p>
<ol>
<li>
<p>Update the <code>Webhook Sensor</code> and add the <code>dataKey</code> in the parameter at index 0.</p>
<div class="codehilite"><pre><span></span>kubectl -n argo-events apply -f https://raw.githubusercontent.com/argoproj/argo-events/stable/examples/tutorials/02-parameterization/sensor-02.yaml
</pre></div>


</li>
<li>
<p>Send a HTTP request to the event-source pod.</p>
<div class="codehilite"><pre><span></span>curl -d &#39;{&quot;message&quot;:&quot;this is my first webhook&quot;}&#39; -H &quot;Content-Type: application/json&quot; -X POST http://localhost:12000/example
</pre></div>


</li>
<li>
<p>Inspect the output of the Argo workflow that was created.</p>
<div class="codehilite"><pre><span></span>argo logs name_of_the_workflow
</pre></div>


</li>
</ol>
<p>You will see the following output,</p>
<div class="codehilite"><pre><span></span>     __________________________ 
    &lt; this is my first webhook &gt;
     -------------------------- 
        \
         \
          \     
                        ##        .            
                  ## ## ##       ==            
               ## ## ## ##      ===            
           /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;___/ ===        
      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~   
           \______ o          __/            
            \    \        __/             
              \____\______/
</pre></div>


<p>Yay!! The Argo workflow printed the message. You can add however many number of parameters
to update the trigger resource on the fly.</p>
<p><strong><em>Note</em></strong>: If you define both the <code>contextKey</code> and <code>dataKey</code> within a parameter, then
the <code>dataKey</code> takes the precedence.</p>
<h3 id="default-values">Default Values<a class="headerlink" href="#default-values" title="Permanent link">&para;</a></h3>
<p>Each parameter comes with an option to configure the default value. This is specially
important when the <code>key</code> you defined in the parameter doesn't exist in the event.</p>
<ol>
<li>
<p>Update the <code>Webhook Sensor</code> and add the <code>value</code> for the parameter at index 0.
   We will also update the <code>dataKey</code> to an unknown event key.</p>
<div class="codehilite"><pre><span></span>kubectl -n argo-events apply -f https://raw.githubusercontent.com/argoproj/argo-events/stable/examples/tutorials/02-parameterization/sensor-03.yaml
</pre></div>


</li>
<li>
<p>Send a HTTP request to the event-source pod.</p>
<div class="codehilite"><pre><span></span>curl -d &#39;{&quot;message&quot;:&quot;this is my first webhook&quot;}&#39; -H &quot;Content-Type: application/json&quot; -X POST http://localhost:12000/example
</pre></div>


</li>
<li>
<p>Inspect the output of the Argo workflow that was created.</p>
<div class="codehilite"><pre><span></span>argo logs name_of_the_workflow
</pre></div>


</li>
</ol>
<p>You will see the following output,</p>
<div class="codehilite"><pre><span></span>    _______________________ 
    &lt; wow! a default value. &gt;
    ----------------------- 
       \
        \
         \     
                       ##        .            
                 ## ## ##       ==            
              ## ## ## ##      ===            
          /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;___/ ===        
     ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~   
          \______ o          __/            
           \    \        __/             
             \____\______/
</pre></div>


<p><br/></p>
<h3 id="sprig-templates">Sprig Templates<a class="headerlink" href="#sprig-templates" title="Permanent link">&para;</a></h3>
<p>The <a href="https://github.com/Masterminds/sprig">sprig template</a> exposed through <code>contextTemplate</code> and <code>dataTemplate</code> lets you alter the event
context and event data before it gets applied to the trigger via <code>parameters</code>.</p>
<p>Take a look at the example defined <a href="https://github.com/argoproj/argo-events/blob/stable/examples/sensors/trigger-with-template.yaml">here</a>, it contains the parameters
as follows,</p>
<div class="codehilite"><pre><span></span><span class="x">    parameters:</span>
<span class="x">    # Retrieve the &#39;message&#39; key from the payload</span>
<span class="x">    - src:</span>
<span class="x">        dependencyName: test-dep</span>
<span class="x">        dataTemplate: &quot;</span><span class="cp">{{</span> <span class="nv">.Input.body.message</span> <span class="o">|</span> <span class="nf">title</span> <span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">      dest: spec.arguments.parameters.0.value</span>
<span class="x">    # Title case the context subject</span>
<span class="x">    - src:</span>
<span class="x">        dependencyName: test-dep</span>
<span class="x">        contextTemplate: &quot;</span><span class="cp">{{</span> <span class="nv">.Input.subject</span> <span class="o">|</span> <span class="nf">title</span> <span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">      dest: spec.arguments.parameters.1.value</span>
<span class="x">    # Retrieve the &#39;name&#39; key from the payload, remove all whitespace and lowercase it.</span>
<span class="x">    - src:</span>
<span class="x">        dependencyName: test-dep</span>
<span class="x">        dataTemplate: &quot;</span><span class="cp">{{</span> <span class="nv">.Input.body.name</span> <span class="o">|</span> <span class="nf">nospace</span> <span class="o">|</span> <span class="nf">lower</span> <span class="cp">}}</span><span class="x">-&quot;</span>
<span class="x">      dest: metadata.generateName</span>
<span class="x">      operation: append</span>
</pre></div>


<p>Consider the event the sensor received has format like,</p>
<div class="codehilite"><pre><span></span>    {
        &quot;context&quot;: {
          &quot;type&quot;: &quot;type_of_event_source&quot;,
          &quot;specversion&quot;: &quot;cloud_events_version&quot;,
          &quot;source&quot;: &quot;name_of_the_event_source&quot;,
          &quot;id&quot;: &quot;unique_event_id&quot;,
          &quot;time&quot;: &quot;event_time&quot;,
          &quot;datacontenttype&quot;: &quot;type_of_data&quot;,
          &quot;subject&quot;: &quot;name_of_the_configuration_within_event_source&quot;
        },
        &quot;data&quot;: {
          &quot;body&quot;: {
            &quot;name&quot;: &quot;foo bar&quot;,
            &quot;message&quot;: &quot;hello there!!&quot;
          },
        }
    }
</pre></div>


<p>The parameters are transformed as,</p>
<ol>
<li>
<p>The first parameter extracts the <code>body.message</code> from event data and applies <code>title</code> filter which basically
   capitalizes the first letter and replaces the <code>spec.arguments.parameters.0.value</code>.</p>
</li>
<li>
<p>The second parameter extracts the <code>subject</code> from the event context and again applies <code>title</code> filter and replaces the
   <code>spec.arguments.parameters.1.value</code>.</p>
</li>
<li>
<p>The third parameter extracts the <code>body.name</code> from the event data, applies <code>nospace</code> filter which removes all
   white spaces and then <code>lower</code> filter which lowercases the text and appends it to <code>metadata.generateName</code>.</p>
</li>
</ol>
<p>Send a curl request to event-source as follows,</p>
<div class="codehilite"><pre><span></span>    curl -d &#39;{&quot;name&quot;:&quot;foo bar&quot;, &quot;message&quot;: &quot;hello there!!&quot;}&#39; -H &quot;Content-Type: application/json&quot; -X POST http://localhost:12000/example
</pre></div>


<p>and you will see an Argo workflow being sprung with name like <code>webhook-foobar-xxxxx</code>.</p>
<p>Check the output of the workflow, it should print something like,</p>
<div class="codehilite"><pre><span></span>     ____________________________ 
    &lt; Hello There!! from Example &gt;
     ---------------------------- 
        \
         \
          \     
                        ##        .            
                  ## ## ##       ==            
               ## ## ## ##      ===            
           /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;___/ ===        
      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~   
           \______ o          __/            
            \    \        __/             
              \____\______/
</pre></div>


<p><br/></p>
<h3 id="operations">Operations<a class="headerlink" href="#operations" title="Permanent link">&para;</a></h3>
<p>Sometimes you need the ability to append or prepend a parameter value to 
an existing value in trigger resource. This is where the <code>operation</code> field within
a parameter comes handy.</p>
<ol>
<li>
<p>Update the <code>Webhook Sensor</code> and add the <code>operation</code> in the parameter at index 0.
   We will prepend the message to an existing value.</p>
<div class="codehilite"><pre><span></span>kubectl -n argo-events apply -f https://raw.githubusercontent.com/argoproj/argo-events/stable/examples/tutorials/02-parameterization/sensor-04.yaml
</pre></div>


</li>
<li>
<p>Send a HTTP request to the event-source.</p>
<div class="codehilite"><pre><span></span>curl -d &#39;{&quot;message&quot;:&quot;hey!!&quot;}&#39; -H &quot;Content-Type: application/json&quot; -X POST http://localhost:12000/example
</pre></div>


</li>
<li>
<p>Inspect the output of the Argo workflow that was created.</p>
<div class="codehilite"><pre><span></span>argo logs name_of_the_workflow
</pre></div>


</li>
</ol>
<p>You will see the following output,</p>
<div class="codehilite"><pre><span></span>     __________________ 
    &lt; hey!!hello world &gt;
     ------------------ 
        \
         \
          \     
                        ##        .            
                  ## ## ##       ==            
               ## ## ## ##      ===            
           /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;___/ ===        
      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~   
           \______ o          __/            
            \    \        __/             
              \____\______/
</pre></div>


<h2 id="trigger-template-parameterization">Trigger Template Parameterization<a class="headerlink" href="#trigger-template-parameterization" title="Permanent link">&para;</a></h2>
<p>The parameterization you saw above deals with the trigger resource, but sometimes
you need to parameterize the trigger template itself. This comes handy when you have
the trigger resource stored on some external source like S3, Git, etc. and you need
to replace the url of the source on the fly in trigger template.</p>
<p>Imagine a scenario where you want to parameterize the parameters of trigger to 
parameterize the trigger resource. What?...</p>
<p>The sensor you have been using in this tutorial has one parameter defined in the
trigger resource under <code>k8s</code>. We will parameterize that <code>parameter</code> by
applying a parameter at the trigger template level.</p>
<ol>
<li>
<p>Update the <code>Webhook Sensor</code> and add parameters at trigger level.</p>
<div class="codehilite"><pre><span></span>kubectl -n argo-events apply -f https://raw.githubusercontent.com/argoproj/argo-events/stable/examples/tutorials/02-parameterization/sensor-05.yaml
</pre></div>


</li>
<li>
<p>Send a HTTP request to the event-source.</p>
<div class="codehilite"><pre><span></span>curl -d &#39;{&quot;dependencyName&quot;:&quot;test-dep&quot;, &quot;dataKey&quot;: &quot;body.message&quot;, &quot;dest&quot;: &quot;spec.arguments.parameters.0.value&quot;, &quot;message&quot;: &quot;amazing!!&quot;}&#39; -H &quot;Content-Type: application/json&quot; -X POST http://localhost:12000/example
</pre></div>


</li>
<li>
<p>Inspect the output of the Argo workflow that was created.</p>
<div class="codehilite"><pre><span></span>argo logs name_of_the_workflow
</pre></div>


</li>
</ol>
<p>You will see the following output,</p>
<div class="codehilite"><pre><span></span>    ___________ 
    &lt; amazing!! &gt;
    ----------- 
    \
     \
      \     
                    ##        .            
              ## ## ##       ==            
           ## ## ## ##      ===            
       /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;___/ ===        
    ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~   
       \______ o          __/            
        \    \        __/             
          \____\______/
</pre></div>


<p>Great!! You have now learned how to apply parameters at trigger resource and template level.
Keep in mind that you can apply default values and operations like prepend and append for 
trigger template parameters as well.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01-introduction/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../03-trigger-sources/" title="Trigger Sources" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Trigger Sources
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>